{"ast":null,"code":"import invariant from 'invariant';\nimport ReanimatedEventEmitter from '../../ReanimatedEventEmitter';\nimport { val } from '../val';\nimport AnimatedNode from './AnimatedNode';\nconst NODE_MAPPING = new Map();\nfunction listener(data) {\n  const node = NODE_MAPPING.get(data.id);\n  node && node._callback(data.args);\n}\nclass AnimatedCall extends AnimatedNode {\n  _callback;\n  _args;\n  constructor(args, jsFunction) {\n    invariant(args.every(el => el instanceof AnimatedNode), `Reanimated: Animated.call node args should be an array with elements of type AnimatedNode. One or more of them are not AnimatedNodes`);\n    super({\n      type: 'call',\n      input: args\n    }, args);\n    this._callback = jsFunction;\n    this._args = args;\n  }\n  toString() {\n    return `AnimatedCall, id: ${this.__nodeID}`;\n  }\n  __attach() {\n    super.__attach();\n    NODE_MAPPING.set(this.__nodeID, this);\n    if (NODE_MAPPING.size === 1) {\n      ReanimatedEventEmitter.addListener('onReanimatedCall', listener);\n    }\n  }\n  __detach() {\n    NODE_MAPPING.delete(this.__nodeID);\n    if (NODE_MAPPING.size === 0) {\n      ReanimatedEventEmitter.removeAllListeners('onReanimatedCall');\n    }\n    super.__detach();\n  }\n  __onEvaluate() {\n    this._callback(this._args.map(val));\n    return 0;\n  }\n}\nexport function createAnimatedCall(args, func) {\n  return new AnimatedCall(args, func);\n}","map":{"version":3,"names":["invariant","ReanimatedEventEmitter","val","AnimatedNode","NODE_MAPPING","Map","listener","data","node","get","id","_callback","args","AnimatedCall","_args","constructor","jsFunction","every","el","type","input","toString","__nodeID","__attach","set","size","addListener","__detach","delete","removeAllListeners","__onEvaluate","map","createAnimatedCall","func"],"sources":["C:/Users/13093/codestuff/portfolio/node_modules/react-native-reanimated/lib/reanimated1/core/AnimatedCall.js"],"sourcesContent":["import invariant from 'invariant';\nimport ReanimatedEventEmitter from '../../ReanimatedEventEmitter';\nimport { val } from '../val';\nimport AnimatedNode from './AnimatedNode';\n\nconst NODE_MAPPING = new Map();\n\nfunction listener(data) {\n  const node = NODE_MAPPING.get(data.id);\n  node && node._callback(data.args);\n}\n\nclass AnimatedCall extends AnimatedNode {\n  _callback;\n  _args;\n\n  constructor(args, jsFunction) {\n    invariant(\n      args.every((el) => el instanceof AnimatedNode),\n      `Reanimated: Animated.call node args should be an array with elements of type AnimatedNode. One or more of them are not AnimatedNodes`\n    );\n    super({ type: 'call', input: args }, args);\n    this._callback = jsFunction;\n    this._args = args;\n  }\n\n  toString() {\n    return `AnimatedCall, id: ${this.__nodeID}`;\n  }\n\n  __attach() {\n    super.__attach();\n    NODE_MAPPING.set(this.__nodeID, this);\n    if (NODE_MAPPING.size === 1) {\n      ReanimatedEventEmitter.addListener('onReanimatedCall', listener);\n    }\n  }\n\n  __detach() {\n    NODE_MAPPING.delete(this.__nodeID);\n    if (NODE_MAPPING.size === 0) {\n      ReanimatedEventEmitter.removeAllListeners('onReanimatedCall');\n    }\n    super.__detach();\n  }\n\n  __onEvaluate() {\n    this._callback(this._args.map(val));\n    return 0;\n  }\n}\n\nexport function createAnimatedCall(args, func) {\n  return new AnimatedCall(args, func);\n}\n"],"mappings":"AAAA,OAAOA,SAAS,MAAM,WAAW;AACjC,OAAOC,sBAAsB,MAAM,8BAA8B;AACjE,SAASC,GAAG,QAAQ,QAAQ;AAC5B,OAAOC,YAAY,MAAM,gBAAgB;AAEzC,MAAMC,YAAY,GAAG,IAAIC,GAAG,EAAE;AAE9B,SAASC,QAAQ,CAACC,IAAI,EAAE;EACtB,MAAMC,IAAI,GAAGJ,YAAY,CAACK,GAAG,CAACF,IAAI,CAACG,EAAE,CAAC;EACtCF,IAAI,IAAIA,IAAI,CAACG,SAAS,CAACJ,IAAI,CAACK,IAAI,CAAC;AACnC;AAEA,MAAMC,YAAY,SAASV,YAAY,CAAC;EACtCQ,SAAS;EACTG,KAAK;EAELC,WAAW,CAACH,IAAI,EAAEI,UAAU,EAAE;IAC5BhB,SAAS,CACPY,IAAI,CAACK,KAAK,CAAEC,EAAE,IAAKA,EAAE,YAAYf,YAAY,CAAC,EAC7C,sIAAqI,CACvI;IACD,KAAK,CAAC;MAAEgB,IAAI,EAAE,MAAM;MAAEC,KAAK,EAAER;IAAK,CAAC,EAAEA,IAAI,CAAC;IAC1C,IAAI,CAACD,SAAS,GAAGK,UAAU;IAC3B,IAAI,CAACF,KAAK,GAAGF,IAAI;EACnB;EAEAS,QAAQ,GAAG;IACT,OAAQ,qBAAoB,IAAI,CAACC,QAAS,EAAC;EAC7C;EAEAC,QAAQ,GAAG;IACT,KAAK,CAACA,QAAQ,EAAE;IAChBnB,YAAY,CAACoB,GAAG,CAAC,IAAI,CAACF,QAAQ,EAAE,IAAI,CAAC;IACrC,IAAIlB,YAAY,CAACqB,IAAI,KAAK,CAAC,EAAE;MAC3BxB,sBAAsB,CAACyB,WAAW,CAAC,kBAAkB,EAAEpB,QAAQ,CAAC;IAClE;EACF;EAEAqB,QAAQ,GAAG;IACTvB,YAAY,CAACwB,MAAM,CAAC,IAAI,CAACN,QAAQ,CAAC;IAClC,IAAIlB,YAAY,CAACqB,IAAI,KAAK,CAAC,EAAE;MAC3BxB,sBAAsB,CAAC4B,kBAAkB,CAAC,kBAAkB,CAAC;IAC/D;IACA,KAAK,CAACF,QAAQ,EAAE;EAClB;EAEAG,YAAY,GAAG;IACb,IAAI,CAACnB,SAAS,CAAC,IAAI,CAACG,KAAK,CAACiB,GAAG,CAAC7B,GAAG,CAAC,CAAC;IACnC,OAAO,CAAC;EACV;AACF;AAEA,OAAO,SAAS8B,kBAAkB,CAACpB,IAAI,EAAEqB,IAAI,EAAE;EAC7C,OAAO,IAAIpB,YAAY,CAACD,IAAI,EAAEqB,IAAI,CAAC;AACrC"},"metadata":{},"sourceType":"module","externalDependencies":[]}