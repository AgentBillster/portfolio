{"ast":null,"code":"import { defineAnimation } from './util';\nexport function withSpring(toValue, userConfig, callback) {\n  'worklet';\n\n  return defineAnimation(toValue, () => {\n    'worklet';\n\n    // TODO: figure out why we can't use spread or Object.assign here\n    // when user config is \"frozen object\" we can't enumerate it (perhaps\n    // something is wrong with the object prototype).\n    const config = {\n      damping: 10,\n      mass: 1,\n      stiffness: 100,\n      overshootClamping: false,\n      restDisplacementThreshold: 0.01,\n      restSpeedThreshold: 2,\n      velocity: 0\n    };\n    if (userConfig) {\n      Object.keys(userConfig).forEach(key => config[key] = userConfig[key]);\n    }\n    function spring(animation, now) {\n      const {\n        toValue,\n        lastTimestamp,\n        current,\n        velocity\n      } = animation;\n      const deltaTime = Math.min(now - lastTimestamp, 64);\n      animation.lastTimestamp = now;\n      const c = config.damping;\n      const m = config.mass;\n      const k = config.stiffness;\n      const v0 = -velocity;\n      const x0 = toValue - current;\n      const zeta = c / (2 * Math.sqrt(k * m)); // damping ratio\n      const omega0 = Math.sqrt(k / m); // undamped angular frequency of the oscillator (rad/ms)\n      const omega1 = omega0 * Math.sqrt(1 - Math.pow(zeta, 2)); // exponential decay\n      const t = deltaTime / 1000;\n      const sin1 = Math.sin(omega1 * t);\n      const cos1 = Math.cos(omega1 * t);\n      // under damped\n      const underDampedEnvelope = Math.exp(-zeta * omega0 * t);\n      const underDampedFrag1 = underDampedEnvelope * (sin1 * ((v0 + zeta * omega0 * x0) / omega1) + x0 * cos1);\n      const underDampedPosition = toValue - underDampedFrag1;\n      // This looks crazy -- it's actually just the derivative of the oscillation function\n      const underDampedVelocity = zeta * omega0 * underDampedFrag1 - underDampedEnvelope * (cos1 * (v0 + zeta * omega0 * x0) - omega1 * x0 * sin1);\n      // critically damped\n      const criticallyDampedEnvelope = Math.exp(-omega0 * t);\n      const criticallyDampedPosition = toValue - criticallyDampedEnvelope * (x0 + (v0 + omega0 * x0) * t);\n      const criticallyDampedVelocity = criticallyDampedEnvelope * (v0 * (t * omega0 - 1) + t * x0 * omega0 * omega0);\n      const isOvershooting = () => {\n        if (config.overshootClamping && config.stiffness !== 0) {\n          return current < toValue ? animation.current > toValue : animation.current < toValue;\n        } else {\n          return false;\n        }\n      };\n      const isVelocity = Math.abs(velocity) < config.restSpeedThreshold;\n      const isDisplacement = config.stiffness === 0 || Math.abs(toValue - current) < config.restDisplacementThreshold;\n      if (zeta < 1) {\n        animation.current = underDampedPosition;\n        animation.velocity = underDampedVelocity;\n      } else {\n        animation.current = criticallyDampedPosition;\n        animation.velocity = criticallyDampedVelocity;\n      }\n      if (isOvershooting() || isVelocity && isDisplacement) {\n        if (config.stiffness !== 0) {\n          animation.velocity = 0;\n          animation.current = toValue;\n        }\n        // clear lastTimestamp to avoid using stale value by the next spring animation that starts after this one\n        animation.lastTimestamp = 0;\n        return true;\n      }\n      return false;\n    }\n    function onStart(animation, value, now, previousAnimation) {\n      animation.current = value;\n      if (previousAnimation) {\n        animation.velocity = previousAnimation.velocity || animation.velocity || 0;\n        animation.lastTimestamp = previousAnimation.lastTimestamp || now;\n      } else {\n        animation.lastTimestamp = now;\n      }\n    }\n    return {\n      onFrame: spring,\n      onStart,\n      toValue,\n      velocity: config.velocity || 0,\n      current: toValue,\n      callback,\n      lastTimestamp: 0\n    };\n  });\n}","map":{"version":3,"names":["defineAnimation","withSpring","toValue","userConfig","callback","config","damping","mass","stiffness","overshootClamping","restDisplacementThreshold","restSpeedThreshold","velocity","Object","keys","forEach","key","spring","animation","now","lastTimestamp","current","deltaTime","Math","min","c","m","k","v0","x0","zeta","sqrt","omega0","omega1","pow","t","sin1","sin","cos1","cos","underDampedEnvelope","exp","underDampedFrag1","underDampedPosition","underDampedVelocity","criticallyDampedEnvelope","criticallyDampedPosition","criticallyDampedVelocity","isOvershooting","isVelocity","abs","isDisplacement","onStart","value","previousAnimation","onFrame"],"sources":["C:/Users/13093/codestuff/portfolio/node_modules/react-native-reanimated/lib/reanimated2/animation/spring.js"],"sourcesContent":["import { defineAnimation } from './util';\nexport function withSpring(toValue, userConfig, callback) {\n    'worklet';\n    return defineAnimation(toValue, () => {\n        'worklet';\n        // TODO: figure out why we can't use spread or Object.assign here\n        // when user config is \"frozen object\" we can't enumerate it (perhaps\n        // something is wrong with the object prototype).\n        const config = {\n            damping: 10,\n            mass: 1,\n            stiffness: 100,\n            overshootClamping: false,\n            restDisplacementThreshold: 0.01,\n            restSpeedThreshold: 2,\n            velocity: 0,\n        };\n        if (userConfig) {\n            Object.keys(userConfig).forEach((key) => (config[key] = userConfig[key]));\n        }\n        function spring(animation, now) {\n            const { toValue, lastTimestamp, current, velocity } = animation;\n            const deltaTime = Math.min(now - lastTimestamp, 64);\n            animation.lastTimestamp = now;\n            const c = config.damping;\n            const m = config.mass;\n            const k = config.stiffness;\n            const v0 = -velocity;\n            const x0 = toValue - current;\n            const zeta = c / (2 * Math.sqrt(k * m)); // damping ratio\n            const omega0 = Math.sqrt(k / m); // undamped angular frequency of the oscillator (rad/ms)\n            const omega1 = omega0 * Math.sqrt(1 - Math.pow(zeta, 2)); // exponential decay\n            const t = deltaTime / 1000;\n            const sin1 = Math.sin(omega1 * t);\n            const cos1 = Math.cos(omega1 * t);\n            // under damped\n            const underDampedEnvelope = Math.exp(-zeta * omega0 * t);\n            const underDampedFrag1 = underDampedEnvelope *\n                (sin1 * ((v0 + zeta * omega0 * x0) / omega1) + x0 * cos1);\n            const underDampedPosition = toValue - underDampedFrag1;\n            // This looks crazy -- it's actually just the derivative of the oscillation function\n            const underDampedVelocity = zeta * omega0 * underDampedFrag1 -\n                underDampedEnvelope *\n                    (cos1 * (v0 + zeta * omega0 * x0) - omega1 * x0 * sin1);\n            // critically damped\n            const criticallyDampedEnvelope = Math.exp(-omega0 * t);\n            const criticallyDampedPosition = toValue - criticallyDampedEnvelope * (x0 + (v0 + omega0 * x0) * t);\n            const criticallyDampedVelocity = criticallyDampedEnvelope *\n                (v0 * (t * omega0 - 1) + t * x0 * omega0 * omega0);\n            const isOvershooting = () => {\n                if (config.overshootClamping && config.stiffness !== 0) {\n                    return current < toValue\n                        ? animation.current > toValue\n                        : animation.current < toValue;\n                }\n                else {\n                    return false;\n                }\n            };\n            const isVelocity = Math.abs(velocity) < config.restSpeedThreshold;\n            const isDisplacement = config.stiffness === 0 ||\n                Math.abs(toValue - current) < config.restDisplacementThreshold;\n            if (zeta < 1) {\n                animation.current = underDampedPosition;\n                animation.velocity = underDampedVelocity;\n            }\n            else {\n                animation.current = criticallyDampedPosition;\n                animation.velocity = criticallyDampedVelocity;\n            }\n            if (isOvershooting() || (isVelocity && isDisplacement)) {\n                if (config.stiffness !== 0) {\n                    animation.velocity = 0;\n                    animation.current = toValue;\n                }\n                // clear lastTimestamp to avoid using stale value by the next spring animation that starts after this one\n                animation.lastTimestamp = 0;\n                return true;\n            }\n            return false;\n        }\n        function onStart(animation, value, now, previousAnimation) {\n            animation.current = value;\n            if (previousAnimation) {\n                animation.velocity =\n                    previousAnimation.velocity || animation.velocity || 0;\n                animation.lastTimestamp = previousAnimation.lastTimestamp || now;\n            }\n            else {\n                animation.lastTimestamp = now;\n            }\n        }\n        return {\n            onFrame: spring,\n            onStart,\n            toValue,\n            velocity: config.velocity || 0,\n            current: toValue,\n            callback,\n            lastTimestamp: 0,\n        };\n    });\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}